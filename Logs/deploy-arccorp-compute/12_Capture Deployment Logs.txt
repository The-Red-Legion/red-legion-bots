2025-09-07T16:10:06.9443179Z ##[group]Run echo "=== Final deployment status ==="
2025-09-07T16:10:06.9443885Z [36;1mecho "=== Final deployment status ==="[0m
2025-09-07T16:10:06.9444384Z [36;1m[0m
2025-09-07T16:10:06.9444822Z [36;1m# Use gcloud SSH to check deployment status[0m
2025-09-07T16:10:06.9445578Z [36;1mgcloud compute ssh arccorp-compute --zone=us-central1-a --project=rl-prod-471116 --command='[0m
2025-09-07T16:10:06.9446299Z [36;1m  # Check if this is a first deployment[0m
2025-09-07T16:10:06.9446815Z [36;1m  if [ ! -d /app ]; then[0m
2025-09-07T16:10:06.9447433Z [36;1m    echo "ℹ️  First deployment in progress - /app directory does not exist yet"[0m
2025-09-07T16:10:06.9448095Z [36;1m    echo "This is normal during initial setup"[0m
2025-09-07T16:10:06.9448642Z [36;1m    echo "=== System resource check ==="[0m
2025-09-07T16:10:06.9449179Z [36;1m    free -h || echo "Could not check memory"[0m
2025-09-07T16:10:06.9449740Z [36;1m    echo "=== Deployment log capture completed ==="[0m
2025-09-07T16:10:06.9450295Z [36;1m    exit 0[0m
2025-09-07T16:10:06.9450699Z [36;1m  fi[0m
2025-09-07T16:10:06.9451264Z [36;1m  [0m
2025-09-07T16:10:06.9451656Z [36;1m  # Show bot status[0m
2025-09-07T16:10:06.9452105Z [36;1m  if [ -f /app/bot.pid ]; then[0m
2025-09-07T16:10:06.9452970Z [36;1m    if kill -0 $(cat /app/bot.pid) 2>/dev/null; then[0m
2025-09-07T16:10:06.9453571Z [36;1m      echo "✅ Bot is running (PID: $(cat /app/bot.pid))"[0m
2025-09-07T16:10:06.9454100Z [36;1m    else[0m
2025-09-07T16:10:06.9454554Z [36;1m      echo "❌ Bot process exists but is not running"[0m
2025-09-07T16:10:06.9455061Z [36;1m    fi[0m
2025-09-07T16:10:06.9455453Z [36;1m  else[0m
2025-09-07T16:10:06.9455866Z [36;1m    echo "❌ No bot PID file found"[0m
2025-09-07T16:10:06.9456335Z [36;1m  fi[0m
2025-09-07T16:10:06.9456720Z [36;1m  [0m
2025-09-07T16:10:06.9457108Z [36;1m  # Show recent logs[0m
2025-09-07T16:10:06.9457559Z [36;1m  if [ -f /app/bot.log ]; then[0m
2025-09-07T16:10:06.9458070Z [36;1m    echo "=== Last 20 lines of bot log ==="[0m
2025-09-07T16:10:06.9458587Z [36;1m    tail -20 /app/bot.log[0m
2025-09-07T16:10:06.9459061Z [36;1m  else[0m
2025-09-07T16:10:06.9459478Z [36;1m    echo "❌ No bot log file found"[0m
2025-09-07T16:10:06.9459946Z [36;1m  fi[0m
2025-09-07T16:10:06.9460329Z [36;1m  [0m
2025-09-07T16:10:06.9460732Z [36;1m  # Check system resources[0m
2025-09-07T16:10:06.9461219Z [36;1m  echo "=== System resource check ==="[0m
2025-09-07T16:10:06.9461709Z [36;1m  if [ -d /app ]; then[0m
2025-09-07T16:10:06.9462248Z [36;1m    df -h /app || echo "Could not check disk space for /app"[0m
2025-09-07T16:10:06.9462962Z [36;1m  else[0m
2025-09-07T16:10:06.9463425Z [36;1m    df -h / || echo "Could not check disk space"[0m
2025-09-07T16:10:06.9463928Z [36;1m  fi[0m
2025-09-07T16:10:06.9464353Z [36;1m  free -h || echo "Could not check memory"[0m
2025-09-07T16:10:06.9464861Z [36;1m  [0m
2025-09-07T16:10:06.9465299Z [36;1m  echo "=== Deployment log capture completed ==="[0m
2025-09-07T16:10:06.9465936Z [36;1m' || echo "Could not capture deployment logs - VM may be unreachable"[0m
2025-09-07T16:10:06.9496564Z shell: /usr/bin/bash --noprofile --norc -e -o pipefail ***0***
2025-09-07T16:10:06.9497151Z env:
2025-09-07T16:10:06.9497811Z   DATABASE_URL: ***
2025-09-07T16:10:06.9498537Z   CLOUDSDK_AUTH_CREDENTIAL_FILE_OVERRIDE: /home/runner/work/red-legion-bots/red-legion-bots/gha-creds-710a04cc13d8758d.json
2025-09-07T16:10:06.9499574Z   GOOGLE_APPLICATION_CREDENTIALS: /home/runner/work/red-legion-bots/red-legion-bots/gha-creds-710a04cc13d8758d.json
2025-09-07T16:10:06.9500538Z   GOOGLE_GHA_CREDS_PATH: /home/runner/work/red-legion-bots/red-legion-bots/gha-creds-710a04cc13d8758d.json
2025-09-07T16:10:06.9501243Z   CLOUDSDK_CORE_PROJECT: rl-prod-471116
2025-09-07T16:10:06.9501744Z   CLOUDSDK_PROJECT: rl-prod-471116
2025-09-07T16:10:06.9502217Z   GCLOUD_PROJECT: rl-prod-471116
2025-09-07T16:10:06.9502885Z   GCP_PROJECT: rl-prod-471116
2025-09-07T16:10:06.9503341Z   GOOGLE_CLOUD_PROJECT: rl-prod-471116
2025-09-07T16:10:06.9504099Z   pythonLocation: /opt/hostedtoolcache/Python/3.9.23/x64
2025-09-07T16:10:06.9504784Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.9.23/x64/lib/pkgconfig
2025-09-07T16:10:06.9505425Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.9.23/x64
2025-09-07T16:10:06.9506019Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.9.23/x64
2025-09-07T16:10:06.9506610Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.9.23/x64
2025-09-07T16:10:06.9507196Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.9.23/x64/lib
2025-09-07T16:10:06.9507733Z ##[endgroup]
2025-09-07T16:10:06.9559895Z === Final deployment status ===
2025-09-07T16:10:10.2491213Z ❌ No bot PID file found
2025-09-07T16:10:10.2492119Z ❌ No bot log file found
2025-09-07T16:10:10.2492987Z === System resource check ===
2025-09-07T16:10:10.2520144Z Filesystem      Size  Used Avail Use% Mounted on
2025-09-07T16:10:10.2521197Z /dev/root       9.6G  3.5G  6.1G  36% /
2025-09-07T16:10:10.2566109Z                total        used        free      shared  buff/cache   available
2025-09-07T16:10:10.2567230Z Mem:           554Mi       242Mi        41Mi       0.0Ki       270Mi       215Mi
2025-09-07T16:10:10.2569206Z Swap:             0B          0B          0B
2025-09-07T16:10:10.2569886Z === Deployment log capture completed ===
